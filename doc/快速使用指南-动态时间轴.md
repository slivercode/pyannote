# 快速使用指南 - 动态时间轴调整

## 🎯 一句话说明

**启用"保持SRT总时长不变"后，系统会根据实际配音长度自动调整字幕时间轴，确保最终音频与原始SRT时长完全一致。**

---

## 🚀 快速开始（3步）

### 步骤1：上传SRT并配置TTS
```
1. 上传SRT字幕文件
2. 选择TTS引擎（GPT-SoVITS 或 QwenTTS）
3. 配置角色音色
```

### 步骤2：启用智能加速
```
☑ 启用智能音频加速（推荐）
🎚️ 最大加速倍率: 2.0x
☑ 保持SRT总时长不变（推荐）← 关键选项
```

### 步骤3：开始配音
```
点击"开始配音"按钮，等待处理完成
```

---

## 💡 使用场景

### 场景1：日语配音（常见问题）
**问题**：日语配音通常比中文字幕时长更长

**解决**：
- 启用智能加速：自动压缩音频
- 启用保持总时长：自动调整字幕时间轴
- 结果：音频和字幕完美同步，总时长不变

### 场景2：英语配音
**问题**：英语配音可能比中文字幕更短

**解决**：
- 系统自动扩展静音间隙
- 保持总时长不变
- 结果：配音节奏自然，时长一致

### 场景3：多角色配音
**问题**：不同角色语速不同，时长难以控制

**解决**：
- 每个角色独立调整
- 统一保持总时长
- 结果：多角色配音也能完美对齐

---

## 🎨 界面说明

### 单角色配音界面

```
┌─────────────────────────────────────────┐
│ 📄 上传SRT文件                          │
│ [选择文件] subtitles.srt                │
│                                         │
│ 🎤 选择TTS引擎                          │
│ ⚪ GPT-SoVITS  ⚫ QwenTTS               │
│                                         │
│ 🎭 选择角色                             │
│ [角色1 ▼]                               │
│                                         │
│ ⚙️ 配音设置                             │
│ ☑ 自动对齐时间轴                        │
│                                         │
│ ⚡ 智能加速设置                         │
│ ☑ 启用智能音频加速（推荐）              │
│   自动调整音频速度以匹配字幕时长        │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🎚️ 最大加速倍率: 2.0x               │ │
│ │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │ │
│ │ 1.0x    建议: 1.5x-2.0x        2.5x │ │
│ │                                     │ │
│ │ ─────────────────────────────────── │ │
│ │ ⏱️ ☑ 保持SRT总时长不变（推荐）      │ │
│ │   动态调整字幕时间轴，确保最终音频  │ │
│ │   时长与原始SRT一致                 │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [▶️ 开始配音]                           │
└─────────────────────────────────────────┘
```

---

## 📊 效果对比

### 不启用"保持总时长"

```
原始SRT: ━━━━━━━━━━━━━━━━━━━━ (10秒)
配音音频: ━━━━━━━━━━━━━━━━━━━━━━━━ (12秒)
最终结果: ━━━━━━━━━━━━━━━━━━━━━━━━ (12秒) ❌ 超出2秒
```

### 启用"保持总时长"

```
原始SRT: ━━━━━━━━━━━━━━━━━━━━ (10秒)
配音音频: ━━━━━━━━━━━━━━━━━━━━━━━━ (12秒)
↓ 自动调整
最终结果: ━━━━━━━━━━━━━━━━━━━━ (10秒) ✅ 完美对齐
```

---

## 🔧 参数说明

### 最大加速倍率
- **范围**：1.0x - 2.5x
- **推荐**：1.5x - 2.0x
- **说明**：倍率越高，音频压缩越多，但可能影响音质

### 保持SRT总时长不变
- **默认**：启用（推荐）
- **作用**：动态调整字幕时间轴，确保最终音频时长与原始SRT一致
- **原理**：通过智能压缩/扩展静音间隙来吸收时长差异

---

## 📝 常见问题

### Q1: 为什么要保持总时长不变？
**A**: 确保配音音频与原视频完美对齐，避免音画不同步。

### Q2: 如果配音时长超出很多怎么办？
**A**: 系统会自动压缩静音间隙。如果间隙不足，会允许字幕紧密排列。建议适当提高最大加速倍率。

### Q3: 会影响音质吗？
**A**: 适度的加速（1.5x-2.0x）对音质影响很小。过度加速可能影响音质，建议根据实际效果调整。

### Q4: 多角色配音也支持吗？
**A**: 完全支持！每个角色的配音都会独立调整，最终统一保持总时长。

### Q5: 如何查看调整效果？
**A**: 配音完成后，查看输出目录中的 `updated_subtitles.srt` 文件，可以看到调整后的时间轴。

---

## 🎓 进阶技巧

### 技巧1：根据语言调整倍率
```
中文 → 日语：建议 1.8x - 2.2x（日语通常更长）
中文 → 英语：建议 1.3x - 1.6x（英语可能更短）
中文 → 韩语：建议 1.5x - 1.8x
```

### 技巧2：查看调整日志
```
配音过程中，控制台会输出详细的调整信息：
- 每段配音的原时长和实际时长
- 时长差异统计
- 间隙压缩/扩展比例
- 最终总时长验证
```

### 技巧3：批量处理
```
1. 先用一个SRT测试最佳参数
2. 记录最佳的最大加速倍率
3. 批量处理时使用相同参数
```

---

## ⚠️ 注意事项

1. **必须启用智能加速**：只有启用"智能音频加速"后，才会显示"保持总时长"选项
2. **检查输出文件**：配音完成后，检查 `updated_subtitles.srt` 确认时间轴正确
3. **音质优先**：如果发现音质下降明显，适当降低最大加速倍率
4. **静音间隙**：原始SRT的静音间隙越多，调整空间越大

---

## 📞 获取帮助

如遇到问题：
1. 查看控制台日志中的详细调整信息
2. 检查 `updated_subtitles.srt` 文件
3. 尝试调整最大加速倍率
4. 参考完整文档：`动态时间轴调整完成说明.md`

---

**祝您配音愉快！🎉**
